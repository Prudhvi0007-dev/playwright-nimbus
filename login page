import React, { useState, useEffect } from 'react';
import { Eye, EyeOff, ArrowRight, Briefcase } from 'lucide-react';

// --- CUSTOM INPUT COMPONENT ---
const MinimalInput = ({ label, type = "text", placeholder, value, onChange }) => {
  const [isFocused, setIsFocused] = useState(false);
  const [showPassword, setShowPassword] = useState(false);

  const inputType = type === "password" ? (showPassword ? "text" : "password") : type;

  return (
    <div className="group relative mb-8">
      {/* Label that floats or sits */}
      <label 
        className={`absolute left-0 transition-all duration-300 ease-out pointer-events-none font-medium tracking-wide
          ${isFocused || value ? '-top-6 text-xs text-white/70' : 'top-2 text-white/40 text-base'}
        `}
      >
        {label}
      </label>

      {/* The Input */}
      <input
        type={inputType}
        value={value}
        onChange={onChange}
        onFocus={() => setIsFocused(true)}
        onBlur={() => setIsFocused(false)}
        className="w-full bg-transparent border-none text-white text-lg font-light placeholder-transparent focus:ring-0 px-0 pr-10 py-2 border-b border-white/20 transition-all duration-300 group-hover:border-white/40"
      />

      {/* Animated Underline */}
      <div 
        className={`absolute bottom-0 left-0 h-[1px] bg-white transition-all duration-500 ease-out
          ${isFocused ? 'w-full shadow-[0_0_10px_rgba(255,255,255,0.5)]' : 'w-0 opacity-50'}
        `}
      />

      {/* Password Toggle */}
      {type === "password" && (
        <button
          type="button"
          onClick={() => setShowPassword(!showPassword)}
          className="absolute right-2 top-1/2 -translate-y-1/2 text-white/30 hover:text-white transition-colors"
        >
          {showPassword ? <EyeOff size={18} /> : <Eye size={18} />}
        </button>
      )}
    </div>
  );
};

// --- MAIN LOGIN SCREEN ---
export default function LoginScreen() {
  const [formData, setFormData] = useState({ email: '', password: '' });
  const [isLoading, setIsLoading] = useState(false);
  const [mounted, setMounted] = useState(false);

  // Trigger animations on mount
  useEffect(() => {
    setMounted(true);
  }, []);

  const handleSubmit = (e) => {
    e.preventDefault();
    setIsLoading(true);
    setTimeout(() => setIsLoading(false), 2000);
  };

  return (
    <div className="min-h-screen bg-black text-white font-sans overflow-hidden relative flex items-center justify-center selection:bg-white/20">
      
      {/* 1. ANIMATED BACKGROUND (The "Aurora") */}
      <div className="absolute inset-0 z-0 pointer-events-none">
        <div className="absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-blue-900/20 rounded-full blur-[120px] animate-pulse duration-[8000ms]"></div>
        <div className="absolute bottom-[-10%] right-[-10%] w-[60%] h-[60%] bg-purple-900/20 rounded-full blur-[150px] animate-pulse duration-[10000ms]"></div>
        {/* Subtle grid texture overlay */}
        <div className="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 brightness-100 contrast-150 mix-blend-overlay"></div>
      </div>

      {/* 2. GLASS CARD */}
      <div 
        className={`
          relative z-10 w-full max-w-[420px] p-10 
          bg-white/[0.03] backdrop-blur-2xl border border-white/[0.05] rounded-[32px] shadow-2xl
          transition-all duration-1000 ease-out transform
          ${mounted ? 'opacity-100 translate-y-0 scale-100' : 'opacity-0 translate-y-10 scale-95'}
        `}
      >
        {/* Header - Minimalist (No Logo) */}
        <div className="mb-12 text-center pt-4">
          <h1 className="text-3xl font-light tracking-tight mb-2">Welcome Back</h1>
          <p className="text-white/40 text-sm tracking-wide">Enter your credentials to access the account.</p>
        </div>

        {/* Form */}
        <form onSubmit={handleSubmit}>
          <MinimalInput 
            label="Email Address or User ID" 
            value={formData.email} 
            onChange={(e) => setFormData({...formData, email: e.target.value})} 
          />
          <MinimalInput 
            label="Password" 
            type="password" 
            value={formData.password} 
            onChange={(e) => setFormData({...formData, password: e.target.value})} 
          />

          <div className="flex items-center justify-between mb-10 text-xs">
            <label className="flex items-center gap-2 cursor-pointer text-white/60 hover:text-white transition-colors group">
              <div className="w-4 h-4 rounded border border-white/20 group-hover:border-white/60 flex items-center justify-center transition-colors">
                 {/* Custom Checkbox Logic could go here */}
                 <div className="w-2 h-2 bg-white rounded-sm opacity-0 group-hover:opacity-100 transition-opacity"></div>
              </div>
              Remember me
            </label>
            <a href="#" className="text-white/40 hover:text-white transition-colors">Forgot Password?</a>
          </div>

          <button 
            type="submit" 
            disabled={isLoading}
            className="w-full h-14 bg-white text-black rounded-2xl font-semibold text-lg hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 flex items-center justify-center gap-2 group relative overflow-hidden"
          >
            {isLoading ? (
               <div className="w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin" />
            ) : (
              <>
                <span className="relative z-10">Sign In</span>
                <ArrowRight size={20} className="relative z-10 group-hover:translate-x-1 transition-transform" />
              </>
            )}
            
            {/* Shimmer Effect on Button */}
            <div className="absolute inset-0 -translate-x-full group-hover:animate-[shimmer_1.5s_infinite] bg-gradient-to-r from-transparent via-white/50 to-transparent z-0"></div>
          </button>
        </form>

        {/* Footer / Socials */}
        <div className="mt-12">
          <div className="flex items-center gap-4 mb-6">
            <div className="h-[1px] flex-1 bg-white/10"></div>
            <span className="text-xs text-white/20 uppercase tracking-widest">Or continue with</span>
            <div className="h-[1px] flex-1 bg-white/10"></div>
          </div>

          <div className="grid grid-cols-1 gap-4">
             <button className="h-12 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/20 transition-all flex items-center justify-center gap-2 text-sm font-medium">
               <Briefcase size={20} className="text-white/80" />
               Sign in with ADP
             </button>
          </div>
        </div>
      </div>
      
      {/* Styles for animation */}
      <style>{`
        @keyframes shimmer {
          100% {
            transform: translateX(100%);
          }
        }
      `}</style>
    </div>
  );
}
